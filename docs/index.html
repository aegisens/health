<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aegisens | Health That Senses You</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ===== GLOBAL STYLES ===== */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', system-ui, sans-serif; }
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) fixed;
            min-height: 100vh; color: white; line-height: 1.6;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }

        /* ===== HEADER ===== */
        .header {
            padding: 1.5rem 0; background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px); border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .header .container { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.8rem; font-weight: 800; color: #ffffff; text-decoration: none; display: flex; align-items: center; gap: 10px; }
        .logo i { color: #a3bffa; }
        .logo .slogan { font-size: 0.9rem; font-weight: 300; color: rgba(255, 255, 255, 0.7); margin-left: 0.5rem; }
        .nav a { color: rgba(255, 255, 255, 0.85); text-decoration: none; margin-left: 2rem; transition: color 0.3s; font-weight: 500; }
        .nav a:hover { color: #ffffff; }

        /* ===== HERO SECTION ===== */
        .hero {
            min-height: 90vh; display: flex; align-items: center; padding: 4rem 2rem;
            position: relative; overflow: hidden;
        }
        .hero-bg {
            position: absolute; top: -50%; right: -30%; width: 80%; height: 200%;
            background: radial-gradient(circle, rgba(163, 191, 250, 0.15) 0%, transparent 70%); z-index: 0;
        }
        .hero-grid {
            max-width: 1200px; margin: 0 auto; display: grid; grid-template-columns: 1fr 1fr;
            gap: 4rem; align-items: center; position: relative; z-index: 1;
        }
        /* Central Brand Name */
        .brand-main {
            font-size: 4.5rem; font-weight: 900; color: #B87333; line-height: 1;
            margin-bottom: 0.5rem; letter-spacing: -1px; text-align: center;
        }
        .hero-text h1 {
            font-size: 3.5rem; font-weight: 800; line-height: 1.1; color: #B5838D;
            margin-bottom: 2rem; text-align: center;
        }
        .hero-text h1 span.voice { color: #B5838D; }
        .hero-text h1 span.rhythm { color: #B5838D; }
        .hero-text .subtitle {
            font-size: 1.5rem; line-height: 1.6; color: rgba(255, 255, 255, 0.9);
            margin-bottom: 3rem; text-align: center;
        }
        .cta-buttons {
            display: flex; gap: 1rem; flex-wrap: wrap; margin-bottom: 1.5rem;
            justify-content: center;
        }
        .btn-primary {
            display: inline-block; background: linear-gradient(90deg, #ffb8d9 0%, #a3bffa 100%);
            color: #2d1b69; padding: 1.2rem 3rem; font-size: 1.2rem; font-weight: bold;
            border-radius: 50px; text-decoration: none;
            box-shadow: 0 6px 20px rgba(255, 184, 217, 0.4);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .btn-primary:hover { transform: translateY(-3px); box-shadow: 0 10px 25px rgba(255, 184, 217, 0.6); }
        .btn-secondary {
            display: inline-block; border: 2px solid rgba(255, 255, 255, 0.5);
            color: rgba(255, 255, 255, 0.9); padding: 1.2rem 2.5rem;
            font-size: 1.2rem; font-weight: 600; border-radius: 50px;
            text-decoration: none; transition: all 0.3s; background: transparent;
        }
        .btn-secondary:hover { background: rgba(255, 255, 255, 0.1); border-color: #ffffff; color: #ffffff; }
        .hero-note {
            color: rgba(255, 255, 255, 0.7); font-size: 0.95rem; text-align: center;
        }
/* ===== WAITLIST CARD ===== */
        .waitlist-card {
            background: rgba(255, 255, 255, 0.92); backdrop-filter: blur(10px);
            border-radius: 20px; padding: 3rem; border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2); color: #5a4a6a;
        }
        .waitlist-card h3 { font-size: 1.8rem; font-weight: bold; color: #5a4a6a; margin-bottom: 1rem; text-align: center; }
        .waitlist-card p { color: #8a7a9c; margin-bottom: 2rem; text-align: center; }
        /* Live Counter Styling */
        .counter-container {
            text-align: center; margin-bottom: 2rem; padding: 1.5rem;
            background: rgba(255, 255, 255, 0.05); border-radius: 16px;
        }
        .counter-number {
            font-size: 3.5rem; font-weight: 800; color: #B87333; line-height: 1;
            transition: opacity 0.3s ease;
        }
        .counter-label { color: #5a4a6a ); font-size: 1.1rem; margin-top: 0.5rem; }
        .counter-incentive {
            color: #a3bffa; font-size: 0.95rem; margin-top: 0.75rem; font-weight: 600;
        }
        .counter-incentive i { margin-right: 5px; }
        /* Form Styles */
        #waitlist-form { display: flex; flex-direction: column; gap: 1rem; }
        #waitlist-form input {
            padding: 1rem; border-radius: 12px; border: 1px solid #e1d5ed;
            background: #faf7fc; color: #5a4a6a; font-size: 1rem;
        }
        #waitlist-form button {
            background: linear-gradient(90deg, #ffb8d9 0%, #a3bffa 100%);
            color: #2d1b69; border: none; padding: 1rem; border-radius: 12px;
            font-size: 1.1rem; font-weight: bold; cursor: pointer; transition: background 0.3s;
        }
        #waitlist-form button:hover { background: linear-gradient(90deg, #f5a5cc 0%, #8daef5 100%); }
        .form-note { color: #b8abc6; font-size: 0.9rem; margin-top: 1.5rem; text-align: center; }

        /* ===== VISION SECTION ===== */
        .section { margin-top: 5rem; padding: 3rem 0; }
        .section h2 { text-align: center; color: #5a4a6a; font-size: 2.5rem; margin-bottom: 3rem; }
        .vision-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; }
        .vision-card {
            background: rgba(255, 255, 255, 0.92); backdrop-filter: blur(10px);
            border-radius: 16px; padding: 2rem; border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15); transition: transform 0.3s, box-shadow 0.3s;
            color: #5a4a6a;
        }
        .vision-card:hover { transform: translateY(-8px); box-shadow: 0 15px 35px rgba(0, 0, 0, 0.25); }
        .vision-icon { font-size: 2.5rem; margin-bottom: 1rem; }
        .vision-card h3 { color: #a3bffa; margin-bottom: 1rem; }
        .vision-card p { color: #8a7a9c; }
        .launch-tag {
            display: inline-block; background: rgba(163, 191, 250, 0.2); color: #a3bffa;
            padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.8rem; margin-top: 1rem;
        }

        /* ===== FOUNDER SECTION ===== */
        .founder-section {
            background: linear-gradient(135deg, rgba(181, 131, 141, 0.08) 0%, rgba(255, 250, 252, 0.04) 100%) !important;
        }
        .founder-container {
            display: grid; grid-template-columns: 1fr 2fr; gap: 3rem; align-items: center;
        }
        .founder-image { text-align: center; }
        .founder-image .avatar {
            width: 200px; height: 200px; border-radius: 50%;
            background: linear-gradient(135deg, #ffb8d9, #a3bffa);
            margin: 0 auto 1.5rem; display: flex; align-items: center; justify-content: center;
            font-size: 4rem; color: #ffffff;
}
        .founder-info h3 { font-size: 2rem; color: #ffffff; margin-bottom: 1rem; }
        .founder-info .title { color: #ffb8d9; font-size: 1.2rem; margin-bottom: 2rem; }
        .founder-bio { color: rgba(255, 255, 255, 0.85); font-size: 1.1rem; line-height: 1.7; }
        .founder-bio p { margin-bottom: 1.5rem; }

        /* ===== VIDEO DEMO PLACEHOLDER ===== */
        #demo-placeholder {
            text-align: center; padding: 3rem; margin-top: 3rem;
            background: rgba(0, 0, 0, 0.2); border-radius: 20px; border: 2px dashed rgba(255, 255, 255, 0.3);
        }
        .demo-icon { font-size: 4rem; color: #a3bffa; margin-bottom: 1rem; }
        .demo-placeholder-text { color: rgba(255, 255, 255, 0.8); font-size: 1.2rem; margin-top: 1rem; }

        /* ===== FOOTER ===== */
        .footer {
            border-top: 1px solid rgba(255, 255, 255, 0.1); padding: 3rem 0;
            margin-top: 4rem; text-align: center; color: rgba(255, 255, 255, 0.7);
        }
        .footer-links { display: flex; justify-content: center; gap: 2rem; margin-bottom: 2rem; }
        .footer-links a { color: rgba(255, 255, 255, 0.8); text-decoration: none; transition: color 0.3s; }
        .footer-links a:hover { color: #ffffff; }

        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 992px) {
            .hero-grid { grid-template-columns: 1fr; gap: 3rem; }
            .hero-text h1, .brand-main { font-size: 3rem; }
            .founder-container { grid-template-columns: 1fr; text-align: center; }
        }
        @media (max-width: 768px) {
            .header .container { flex-direction: column; gap: 1rem; }
            .nav { margin-top: 1rem; }
            .nav a { margin: 0 1rem; }
            .hero { padding: 3rem 1rem; }
            .hero-text h1, .brand-main { font-size: 2.5rem; }
            .hero-text .subtitle { font-size: 1.2rem; }
            .cta-buttons { flex-direction: column; align-items: center; }
            .btn-primary, .btn-secondary { width: 100%; max-width: 300px; text-align: center; }
            .vision-grid { grid-template-columns: 1fr; }
            .counter-number { font-size: 2.8rem; }
        }
    <style>
/* ===== HEADER ===== */
.header {
    padding: 1rem 0; 
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(10px); 
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.header .container { 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    padding: 0 1.5rem;
}

/* ===== LOGO ===== */
a.logo .logo-text-content .logo-text {
    font-size: 1.7rem; /* POWIƒòKSZONY - teraz wiƒôkszy */
    font-weight: 900; /* POGRUBIONY */
    color: #ffffff;
    white-space: nowrap;
    margin-bottom: 4px;
    line-height: 1;
    text-align: center; /* Wy≈õrodkowanie */
    display: block; /* Blokowy dla centrowania */
    width: 100%; /* Zajmuje ca≈ÇƒÖ szeroko≈õƒá kontenera */
}

a.logo .logo-text-content .slogan { 
    font-size: 1.2rem; /* POMNIEJSZONY - teraz mniejszy */
    font-weight: 700; /* Normalna waga */
    color: rgba(255, 255, 255, 0.95); 
    font-style: italic;
    letter-spacing: 0.5px;
    white-space: nowrap;
    line-height: 1.1;
    text-align: center; /* Wy≈õrodkowanie */
    display: block; /* Blokowy dla centrowania */
    margin-top: 2px; /* Odstƒôp od logo-text */
    width: 100%; /* Zajmuje ca≈ÇƒÖ szeroko≈õƒá kontenera */
}

/* Upewnij siƒô, ≈ºe kontener jest wy≈õrodkowany */
.logo-text-content {
    display: flex;
    flex-direction: column;
    align-items: center; /* Wy≈õrodkowanie w poziomie */
    justify-content: center; /* Wy≈õrodkowanie w pionie */
    text-align: center; /* Dodatkowe centrowanie tekstu */
}

/* RESPONSYWNO≈öƒÜ Z WIƒòKSZƒÑ SPECYFICZNO≈öCIƒÑ */
@media (max-width: 1024px) {
    a.logo .logo-text-content .logo-text {
        font-size: 1.5rem;
    }
    
    a.logo .logo-text-content .slogan {
        font-size: 1.1rem;
    }
}

@media (max-width: 768px) {
    /* POPRAWIENIE DLA TELEFONU - TEKST NA ≈öRODKU */
    a.logo .logo-text-content .logo-text {
        font-size: 1.5rem;
        white-space: normal;
        text-align: center !important; /* Wymuszenie centrowania */
        width: 100%;
        margin-left: 0;
        margin-right: 0;
    }
    
    a.logo .logo-text-content .slogan {
        font-size: 1rem;
        white-space: normal;
        letter-spacing: 0.3px;
        text-align: center !important; /* Wymuszenie centrowania */
        width: 100%;
        margin-left: 0;
        margin-right: 0;
    }
    
    /* NAJWA≈ªNIEJSZA ZMIANA: logo-text-content NA ≈öRODKU */
    .logo-text-content {
        align-items: center !important; /* WYMUSZENIE centrowania */
        text-align: center !important;
        justify-content: center;
        width: 100%;
    }
}

@media (max-width: 480px) {
    a.logo .logo-text-content .logo-text {
        font-size: 1.1rem;
        text-align: center !important;
    }
    
    a.logo .logo-text-content .slogan {
        font-size: 0.95rem;
        font-weight: 600;
        text-align: center !important;
    }
}

@media (max-width: 360px) {
    a.logo .logo-text-content .logo-text {
        font-size: 1rem;
        text-align: center !important;
    }
    
    a.logo .logo-text-content .slogan {
        font-size: 0.85rem;
        text-align: center !important;
    }
}

/* ===== NAVIGATION ===== */
.nav a { 
    color: rgba(255, 255, 255, 0.85); 
    text-decoration: none; 
    margin-left: 1.5rem; 
    transition: color 0.3s; 
    font-weight: 500; 
}

.nav a:hover { 
    color: #ffffff; 
}

/* ===== RESPONSYWNO≈öƒÜ - TELEFON ===== */
@media (max-width: 768px) {
    .header {
        padding: 0.8rem 0;
    }
    
    .header .container {
        padding: 0 1rem;
        flex-direction: column;
        gap: 0.8rem;
        align-items: stretch;
    }
    
    /* LOGO UK≈ÅAD - KOREKTA */
    .logo {
        flex-direction: row;
        text-align: center; /* ZMIANA: center zamiast left */
        gap: 15px;
        width: 100%;
        justify-content: center; /* ZMIANA: center zamiast flex-start */
        align-items: center; /* Wy≈õrodkowanie pionowe */
    }
    
    .logo-image {
        height: 135px;
        margin: 0;
        flex-shrink: 0; /* Zapobiega zmniejszaniu */
    }
    
    /* USU≈É LUB ZAKOMENTUJ TE LINIJKI, BO PRZESUWAJƒÑ TEKST W LEWO: */
    /*
    .logo-text-content {
        align-items: flex-start;
        text-align: left;
    }
    */
    
    /* ZAMIAST TEGO DODAJ: */
    .logo-text-content {
        align-items: center !important;
        text-align: center !important;
        justify-content: center;
        flex: 1; 
    }
    
    .nav {
        margin-top: 0.5rem;
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 0.8rem;
    }
    
    .nav a {
        margin: 0;
        font-size: 0.9rem;
        padding: 0.3rem 0.5rem;
    }
}
</style>
<link rel="icon" type="image/png" href="/image/favicon.png">
</head>
<body>
   <!-- HEADER -->
    <header class="header">
        <div class="container">
            <a href="/" class="logo">
                <img src="/image/logo.png" alt="Aegisens Logo" class="logo-image">
                <div class="logo-text-content">
                    <span class="logo-text">Aegisens</span>
                    <span class="slogan">Health That Senses You</span>
                </div>
            </a>
            <nav class="nav">
                <a href="#vision">Vision</a>
                <a href="#waitlist">Waitlist</a>
                <a href="#founder">Founder</a>
            </nav>
        </div>
    </header>

    <!-- HERO SECTION -->
    <section class="hero">
        <div class="hero-bg"></div>
        <div class="container hero-grid">
            <div class="hero-text">
                <!-- CENTRAL BRAND NAME -->
                <div class="brand-main">Aegisens</div>
                <h1>
                    An AI that <span class="voice">listens to your voice</span><br>
                    and understands your <span class="rhythm">hormonal rhythms</span>.
                </h1>
                <p class="subtitle">
                    Steady, reliable support through your body's <strong>changing rhythms</strong> ‚Äî<br>
    for anyone who's ever felt their body sending signals they couldn't decode.
                </p>
                <div class="cta-buttons">
                    <a href="#waitlist" class="btn-primary">Join the Waitlist for Empathetic Support ‚Üí</a>
                    <a href="#demo-placeholder" class="btn-secondary">üìπ Watch Demo (60s)</a>
                </div>
                <p class="hero-note">Be among the first to experience health that <em>senses</em> you.</p>
            </div>
<!-- COMPLETE VOTING POLL - CLEAN PUBLIC VIEW + ADMIN MODAL -->
<div id="aegisens-vote-widget" style="margin-top: 2rem; padding: 1.5rem; background: linear-gradient(135deg, rgba(159, 122, 234, 0.05) 0%, rgba(224, 122, 154, 0.05) 100%); border-radius: 16px; border: 2px solid #E07A9A; text-align: center; box-shadow: 0 6px 20px rgba(0,0,0,0.04); position: relative; overflow: hidden;">
    <h3 style="color: #2d3748; margin-bottom: 8px; font-size: 1.4rem; font-weight: 700; padding: 0 10px;">üó≥Ô∏è Shape Our 2026 Roadmap</h3>
    <p style="color: #4a5568; margin-bottom: 1.3rem; font-size: 0.95rem; line-height: 1.4; padding: 0 10px;">Click your biggest health mystery. See live community results instantly.</p>
    
    <!-- MAIN CONTAINER -->
    <div id="vote-options-container" style="max-width: 100%; margin: 0 auto; padding: 0 10px;">
        <!-- Options will appear here -->
    </div>

    <!-- HIDDEN ADMIN TRIGGER (visible to all but subtle) -->
    <div id="admin-trigger" style="text-align: center; margin-top: 20px; cursor: pointer; opacity: 0.4; transition: opacity 0.3s;" title="Admin Access">
        <div style="width: 32px; height: 32px; background: #e2e8f0; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; color: #a0aec0; font-size: 1rem;">
            ‚öôÔ∏è
        </div>
    </div>

    <p style="font-size: 0.8rem; color: ivory; margin-top: 1rem; line-height: 1.3; padding: 0 10px; text-shadow: 0 1px 2px rgba(0,0,0,0.1);"><em>Click to vote. One vote per person. Results update in real-time.</em></p>
</div>

<script>
// ========== SECURE POLL SYSTEM ==========
document.addEventListener('DOMContentLoaded', function() {
    const DEFAULT_DATA = [
        { id: 'energy', label: 'üëÇ Unpredictable energy crashes', votes: 42, color: '#E07A9A' },
        { id: 'menopause', label: 'üçÉ Navigating perimenopause', votes: 38, color: '#9F7AEA' },
        { id: 'vulnerable', label: 'ü•ó Navigating my "Vulnerable Day"', votes: 55, color: '#F687B3' },
        { id: 'mood', label: 'üòå Managing mood swings', votes: 27, color: '#81E6D9' },
        { id: 'other', label: 'üí≠ Other health mystery', votes: 15, color: '#68D391' }
    ];

    const STORAGE_KEY = 'aegisens_poll_data';
    const USER_VOTE_KEY = 'aegisens_user_vote';
    
    // ========== SECURE ADMIN CONFIGURATION ==========
    const ADMIN_PASSWORD = 'AegisensStealth2025'; // CHANGE THIS!
    const ADMIN_COOKIE = 'aegisens_admin_access';
    
    let pollData = JSON.parse(localStorage.getItem(STORAGE_KEY)) || JSON.parse(JSON.stringify(DEFAULT_DATA));
    let userVotedOption = localStorage.getItem(USER_VOTE_KEY) || null;
    
    const container = document.getElementById('vote-options-container');
    const adminTrigger = document.getElementById('admin-trigger');
    
    function savePollData(data) {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
    }
    
    function clearUserVote() {
        localStorage.removeItem(USER_VOTE_KEY);
        userVotedOption = null;
    }
    
    // ========== SECURE ADMIN ACCESS ==========
    function isAdminAuthenticated() {
        const cookieValue = getCookie(ADMIN_COOKIE);
        return cookieValue === 'true';
    }
    
    function setAdminAccess(granted) {
        const expiry = new Date();
        expiry.setHours(expiry.getHours() + 2); // 2 hour session
        document.cookie = `${ADMIN_COOKIE}=${granted}; expires=${expiry.toUTCString()}; path=/`;
    }
    
    function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(';').shift();
    }
    
    // ========== ADMIN LOGIN MODAL ==========
    function showAdminLoginModal() {
        // Remove existing modal
        const existingModal = document.getElementById('admin-login-modal');
        if (existingModal) existingModal.remove();
        
        const modalHTML = `
            <div id="admin-login-modal" style="
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.7);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                animation: fadeIn 0.3s;
            ">
                <div style="
                    background: white;
                    padding: 30px;
                    border-radius: 15px;
                    width: 90%;
                    max-width: 400px;
                    box-shadow: 0 20px 40px rgba(0,0,0,0.2);
                    text-align: center;
                ">
                    <h3 style="margin-top: 0; color: #2d3748; margin-bottom: 20px;">üîê Admin Access</h3>
                    <p style="color: #718096; margin-bottom: 25px; font-size: 0.95rem;">
                        Enter admin password to access dashboard
                    </p>
                    <input type="password" id="admin-password-input" placeholder="Password" style="
                        width: 100%;
                        padding: 14px;
                        border: 2px solid #e2e8f0;
                        border-radius: 8px;
                        font-size: 1rem;
                        margin-bottom: 15px;
                        box-sizing: border-box;
                    ">
                    <p id="admin-login-error" style="color: #FC8181; font-size: 0.9rem; margin: 0 0 20px 0; display: none;">
                        Incorrect password
                    </p>
                    <div style="display: flex; gap: 10px;">
                        <button id="admin-login-btn" style="
                            flex: 1;
                            padding: 14px;
                            background: #9F7AEA;
                            color: white;
                            border: none;
                            border-radius: 8px;
                            font-weight: 600;
                            cursor: pointer;
                            font-size: 1rem;
                        ">
                            Login
                        </button>
                        <button id="admin-cancel-btn" style="
                            flex: 1;
                            padding: 14px;
                            background: #e2e8f0;
                            color: #4a5568;
                            border: none;
                            border-radius: 8px;
                            font-weight: 600;
                            cursor: pointer;
                            font-size: 1rem;
                        ">
                            Cancel
                        </button>
                    </div>
                </div>
            </div>
        `;
        
        document.body.insertAdjacentHTML('beforeend', modalHTML);
        
        // Focus input
        setTimeout(() => {
            const input = document.getElementById('admin-password-input');
            if (input) input.focus();
        }, 100);
        
        // Event listeners
        document.getElementById('admin-login-btn').addEventListener('click', handleAdminLogin);
        document.getElementById('admin-cancel-btn').addEventListener('click', () => {
            document.getElementById('admin-login-modal').remove();
        });
        
        document.getElementById('admin-password-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') handleAdminLogin();
        });
    }
    
    function handleAdminLogin() {
        const input = document.getElementById('admin-password-input');
        const error = document.getElementById('admin-login-error');
        
        if (input.value === ADMIN_PASSWORD) {
            setAdminAccess(true);
            document.getElementById('admin-login-modal').remove();
            showAdminDashboard();
        } else {
            error.style.display = 'block';
            input.style.borderColor = '#FC8181';
            input.value = '';
            input.focus();
        }
    }
    
    // ========== ADMIN DASHBOARD MODAL ==========
    function showAdminDashboard() {
        // Remove existing dashboard
        const existingDashboard = document.getElementById('admin-dashboard-modal');
        if (existingDashboard) existingDashboard.remove();
        
        const totalVotes = pollData.reduce((sum, opt) => sum + opt.votes, 0);
        const sortedData = [...pollData].sort((a, b) => b.votes - a.votes);
        
        const dashboardHTML = `
            <div id="admin-dashboard-modal" style="
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10001;
                animation: fadeIn 0.3s;
                padding: 20px;
                box-sizing: border-box;
            ">
                <div style="
                    background: white;
                    border-radius: 20px;
                    width: 100%;
                    max-width: 900px;
                    max-height: 90vh;
                    overflow-y: auto;
                    box-shadow: 0 25px 50px rgba(0,0,0,0.3);
                    position: relative;
                ">
                    <!-- HEADER -->
                    <div style="
                        background: linear-gradient(135deg, #9F7AEA, #E07A9A);
                        color: white;
                        padding: 25px 30px;
                        border-radius: 20px 20px 0 0;
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                    ">
                        <div>
                            <h2 style="margin: 0; font-size: 1.8rem; display: flex; align-items: center; gap: 12px;">
                                üìä Poll Analytics Dashboard
                            </h2>
                            <p style="margin: 8px 0 0; opacity: 0.9; font-size: 0.95rem;">
                                Session expires in 2 hours ‚Ä¢ Total votes: <strong>${totalVotes}</strong>
                            </p>
                        </div>
                        <button id="close-admin-dashboard" style="
                            background: rgba(255,255,255,0.2);
                            color: white;
                            border: none;
                            width: 40px;
                            height: 40px;
                            border-radius: 50%;
                            cursor: pointer;
                            font-size: 1.5rem;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            transition: all 0.3s;
                        ">
                            √ó
                        </button>
                    </div>
                    
                    <!-- MAIN CONTENT -->
                    <div style="padding: 30px;">
                        <!-- STATS OVERVIEW -->
                        <div style="
                            display: grid;
                            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                            gap: 20px;
                            margin-bottom: 30px;
                        ">
                            <div style="
                                background: #f8f9fa;
                                padding: 20px;
                                border-radius: 12px;
                                border-left: 5px solid #9F7AEA;
                            ">
                                <div style="font-size: 0.9rem; color: #718096; margin-bottom: 8px;">Total Votes</div>
                                <div style="font-size: 2.5rem; font-weight: bold; color: #2d3748;">${totalVotes}</div>
                            </div>
                            <div style="
                                background: #f8f9fa;
                                padding: 20px;
                                border-radius: 12px;
                                border-left: 5px solid #E07A9A;
                            ">
                                <div style="font-size: 0.9rem; color: #718096; margin-bottom: 8px;">Most Popular</div>
                                <div style="font-size: 1.2rem; font-weight: bold; color: #2d3748;">
                                    ${sortedData[0].label.split(' ')[0]} (${sortedData[0].votes})
                                </div>
                            </div>
                            <div style="
                                background: #f8f9fa;
                                padding: 20px;
                                border-radius: 12px;
                                border-left: 5px solid #68D391;
                            ">
                                <div style="font-size: 0.9rem; color: #718096; margin-bottom: 8px;">Options</div>
                                <div style="font-size: 2.5rem; font-weight: bold; color: #2d3748;">${pollData.length}</div>
                            </div>
                        </div>
                        
                        <!-- DETAILED VOTE TABLE -->
                        <div style="margin-bottom: 30px;">
                            <h3 style="color: #2d3748; margin-bottom: 20px; font-size: 1.3rem;">
                                üìã Detailed Vote Counts
                            </h3>
                            <div style="overflow-x: auto;">
                                <table style="width: 100%; border-collapse: collapse; font-size: 0.95rem;">
                                    <thead>
                                        <tr style="background: #f8f9fa; border-bottom: 2px solid #e2e8f0;">
                                            <th style="text-align: left; padding: 15px; color: #718096; min-width: 200px;">Option</th>
                                            <th style="text-align: center; padding: 15px; color: #718096; min-width: 100px;">Votes</th>
                                            <th style="text-align: center; padding: 15px; color: #718096; min-width: 100px;">Percentage</th>
                                            <th style="text-align: center; padding: 15px; color: #718096; min-width: 150px;">Visual</th>
                                            <th style="text-align: center; padding: 15px; color: #718096; min-width: 150px;">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${sortedData.map((option, index) => {
                                            const percentage = totalVotes > 0 ? ((option.votes / totalVotes) * 100).toFixed(1) : 0;
                                            return `
                                                <tr style="border-bottom: 1px solid #f1f5f9; ${index === 0 ? 'background: #f0fff4;' : ''}">
                                                    <td style="padding: 15px; color: #2d3748;">
                                                        <div style="display: flex; align-items: center; gap: 12px;">
                                                            <div style="width: 16px; height: 16px; border-radius: 50%; background: ${option.color};"></div>
                                                            <div>
                                                                <div style="font-weight: 600;">${option.label}</div>
                                                                <div style="font-size: 0.85rem; color: #718096;">ID: ${option.id}</div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td style="text-align: center; padding: 15px; font-weight: bold; color: ${option.color}; font-size: 1.2rem;">
                                                        ${option.votes}
                                                    </td>
                                                    <td style="text-align: center; padding: 15px;">
                                                        <div style="font-weight: bold; color: #2d3748; font-size: 1.1rem;">
                                                            ${percentage}%
                                                        </div>
                                                    </td>
                                                    <td style="text-align: center; padding: 15px;">
                                                        <div style="width: 120px; height: 8px; background: #e2e8f0; border-radius: 4px; margin: 0 auto; overflow: hidden;">
                                                            <div style="height: 100%; width: ${percentage}%; background: ${option.color}; border-radius: 4px;"></div>
                                                        </div>
                                                        <div style="font-size: 0.85rem; color: #718096; margin-top: 5px;">
                                                            ${option.votes} / ${totalVotes}
                                                        </div>
                                                    </td>
                                                    <td style="text-align: center; padding: 15px;">
                                                        <div style="display: flex; gap: 8px; justify-content: center;">
                                                            <button onclick="addVoteToOption('${option.id}', 1)" style="
                                                                background: ${option.color};
                                                                color: white;
                                                                border: none;
                                                                padding: 8px 12px;
                                                                border-radius: 6px;
                                                                cursor: pointer;
                                                                font-size: 0.85rem;
                                                                font-weight: 600;
                                                            ">
                                                                +1 Vote
                                                            </button>
                                                            <button onclick="resetOptionVotes('${option.id}')" style="
                                                                background: #FC8181;
                                                                color: white;
                                                                border: none;
                                                                padding: 8px 12px;
                                                                border-radius: 6px;
                                                                cursor: pointer;
                                                                font-size: 0.85rem;
                                                                font-weight: 600;
                                                            ">
                                                                Reset
                                                            </button>
                                                        </div>
                                                    </td>
                                                </tr>
                                            `;
                                        }).join('')}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- ADMIN CONTROLS -->
                        <div style="
                            background: linear-gradient(135deg, #f8f9fa, #edf2f7);
                            padding: 25px;
                            border-radius: 15px;
                            border: 2px dashed #cbd5e0;
                        ">
                            <h3 style="color: #2d3748; margin-bottom: 20px; font-size: 1.3rem;">
                                ‚öôÔ∏è Management Tools
                            </h3>
                            <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                                <button id="reset-all-votes" style="
                                    flex: 1;
                                    min-width: 180px;
                                    padding: 15px;
                                    background: linear-gradient(135deg, #FEB2B2, #FC8181);
                                    color: white;
                                    border: none;
                                    border-radius: 10px;
                                    cursor: pointer;
                                    font-size: 1rem;
                                    font-weight: 600;
                                    transition: all 0.3s;
                                ">
                                    üîÑ Reset All Votes
                                </button>
                                <button id="restore-default-data" style="
                                    flex: 1;
                                    min-width: 180px;
                                    padding: 15px;
                                    background: linear-gradient(135deg, #9AE6B4, #68D391);
                                    color: white;
                                    border: none;
                                    border-radius: 10px;
                                    cursor: pointer;
                                    font-size: 1rem;
                                    font-weight: 600;
                                    transition: all 0.3s;
                                ">
                                    üìä Restore Default Data
                                </button>
                                <button id="export-data" style="
                                    flex: 1;
                                    min-width: 180px;
                                    padding: 15px;
                                    background: linear-gradient(135deg, #9F7AEA, #805AD5);
                                    color: white;
                                    border: none;
                                    border-radius: 10px;
                                    cursor: pointer;
                                    font-size: 1rem;
                                    font-weight: 600;
                                    transition: all 0.3s;
                                ">
                                    üíæ Export Data
                                </button>
                                <button id="add-test-votes" style="
                                    flex: 1;
                                    min-width: 180px;
                                    padding: 15px;
                                    background: linear-gradient(135deg, #FBD38D, #F6AD55);
                                    color: white;
                                    border: none;
                                    border-radius: 10px;
                                    cursor: pointer;
                                    font-size: 1rem;
                                    font-weight: 600;
                                    transition: all 0.3s;
                                ">
                                    üß™ Add 10 Test Votes
                                </button>
                            </div>
                        </div>
                        
                        <!-- FOOTER -->
                        <div style="
                            margin-top: 30px;
                            padding-top: 20px;
                            border-top: 1px solid #e2e8f0;
                            text-align: center;
                            color: #a0aec0;
                            font-size: 0.85rem;
                        ">
                            <p>Dashboard will auto-update when votes change. Last refresh: <span id="dashboard-last-refresh">${new Date().toLocaleTimeString()}</span></p>
                            <p>To logout, close this window or wait for session expiration.</p>
                        </div>
                    </div>
                </div>
            </div>
        `;
        
        document.body.insertAdjacentHTML('beforeend', dashboardHTML);
        
        // Event listeners
        document.getElementById('close-admin-dashboard').addEventListener('click', () => {
            document.getElementById('admin-dashboard-modal').remove();
        });
        
        document.getElementById('reset-all-votes').addEventListener('click', function() {
            if (confirm('Reset ALL votes to zero? This cannot be undone.')) {
                pollData.forEach(option => option.votes = 0);
                savePollData(pollData);
                userVotedOption = null;
                clearUserVote();
                renderPoll();
                showAdminDashboard(); // Refresh dashboard
                showNotification('All votes have been reset to zero.', 'info');
            }
        });
        
        document.getElementById('restore-default-data').addEventListener('click', function() {
            if (confirm('Restore default voting data?')) {
                pollData = JSON.parse(JSON.stringify(DEFAULT_DATA));
                savePollData(pollData);
                userVotedOption = null;
                clearUserVote();
                renderPoll();
                showAdminDashboard(); // Refresh dashboard
                showNotification('Default data restored!', 'success');
            }
        });
        
        document.getElementById('export-data').addEventListener('click', function() {
            const exportData = {
                pollId: 'aegisens_health_poll',
                exportedAt: new Date().toISOString(),
                totalVotes: totalVotes,
                options: pollData
            };
            
            const blob = new Blob([JSON.stringify(exportData, null, 2)], { 
                type: 'application/json' 
            });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `poll-data-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('Data exported successfully!', 'success');
        });
        
        document.getElementById('add-test-votes').addEventListener('click', function() {
            for (let i = 0; i < 10; i++) {
                const randomOption = pollData[Math.floor(Math.random() * pollData.length)];
                randomOption.votes += 1;
            }
            savePollData(pollData);
            renderPoll();
            showAdminDashboard(); // Refresh dashboard
            showNotification('10 test votes added!', 'info');
        });
        
        // Close on ESC key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && document.getElementById('admin-dashboard-modal')) {
                document.getElementById('admin-dashboard-modal').remove();
            }
        });
    }
    
    // ========== GLOBAL ADMIN FUNCTIONS ==========
    window.addVoteToOption = function(optionId, count = 1) {
        const option = pollData.find(opt => opt.id === optionId);
        if (option) {
            option.votes += count;
            savePollData(pollData);
            renderPoll();
            showAdminDashboard(); // Refresh dashboard
            showNotification(`Added ${count} vote(s) to ${option.label.split(' ')[0]}`, 'success');
        }
    };
    
    window.resetOptionVotes = function(optionId) {
        const option = pollData.find(opt => opt.id === optionId);
        if (option && confirm(`Reset votes for "${option.label}" to zero?`)) {
            option.votes = 0;
            savePollData(pollData);
            renderPoll();
            showAdminDashboard(); // Refresh dashboard
            showNotification(`Reset votes for ${option.label.split(' ')[0]}`, 'info');
        }
    };
    
    // ========== MAIN POLL RENDER (CLEAN PUBLIC VIEW) ==========
    function renderPoll() {
        if (!container) return;
        
        container.innerHTML = '';
        const totalVotes = pollData.reduce((sum, opt) => sum + opt.votes, 0);
        
        pollData.forEach(option => {
            const percentage = totalVotes > 0 ? Math.round((option.votes / totalVotes) * 100) : 0;
            const isUserVotedForThis = userVotedOption === option.id;
            const isClickable = !userVotedOption;
            
            const optionEl = document.createElement('div');
            optionEl.className = 'vote-option';
            optionEl.style.cssText = `
                margin-bottom: 20px;
                text-align: left;
                cursor: ${isClickable ? 'pointer' : 'default'};
                transition: all 0.3s;
            `;
            
            const button = document.createElement('div');
            button.style.cssText = `
                width: 100%;
                padding: 18px 20px;
                background: white;
                border: 2px solid ${isUserVotedForThis ? option.color : '#e2e8f0'};
                border-radius: 12px;
                font-weight: 600;
                color: #2d3748;
                text-align: left;
                cursor: ${isClickable ? 'pointer' : 'default'};
                transition: all 0.3s;
                display: flex;
                justify-content: space-between;
                align-items: center;
                position: relative;
            `;
            
            // Add checkmark if user voted for this option
            if (isUserVotedForThis) {
                const voteBadge = document.createElement('div');
                voteBadge.style.cssText = `
                    position: absolute;
                    top: -8px;
                    right: -8px;
                    background: ${option.color};
                    color: white;
                    width: 22px;
                    height: 22px;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 0.7rem;
                    font-weight: bold;
                    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
                `;
                voteBadge.textContent = '‚úì';
                button.appendChild(voteBadge);
            }
            
            // SHOW ONLY PERCENTAGES (no vote counts) - Clean public view
            button.innerHTML = `
                <span style="flex: 1; padding-right: 10px;">${option.label}</span>
                <span style="color: ${option.color}; font-weight: bold; white-space: nowrap;">
                    ${percentage}%
                </span>
            `;
            
            // Progress bar
            const progressBar = document.createElement('div');
            progressBar.style.cssText = `
                height: 8px;
                background: #f1f5f9;
                border-radius: 4px;
                overflow: hidden;
                margin-top: 12px;
                display: block;
            `;
            
            const progressFill = document.createElement('div');
            progressFill.style.cssText = `
                height: 100%;
                width: ${percentage}%;
                background: linear-gradient(90deg, ${option.color}, ${option.color}99);
                border-radius: 4px;
                transition: width 1s ease-out;
            `;
            
            progressBar.appendChild(progressFill);
            button.appendChild(progressBar);
            
            if (isClickable) {
                optionEl.addEventListener('click', function() {
                    option.votes += 1;
                    userVotedOption = option.id;
                    localStorage.setItem(USER_VOTE_KEY, option.id);
                    savePollData(pollData);
                    renderPoll();
                    showThankYouMessage(option);
                });
                
                optionEl.addEventListener('mouseenter', function() {
                    button.style.borderColor = option.color;
                    button.style.boxShadow = `0 4px 12px ${option.color}40`;
                    button.style.transform = 'translateY(-2px)';
                });
                
                optionEl.addEventListener('mouseleave', function() {
                    button.style.borderColor = isUserVotedForThis ? option.color : '#e2e8f0';
                    button.style.boxShadow = 'none';
                    button.style.transform = 'translateY(0)';
                });
            }
            
            optionEl.appendChild(button);
            container.appendChild(optionEl);
        });
        
        // Auto-refresh dashboard if open
        if (document.getElementById('admin-dashboard-modal')) {
            setTimeout(() => {
                if (isAdminAuthenticated()) {
                    showAdminDashboard();
                }
            }, 500);
        }
    }
    
    // ========== HELPER FUNCTIONS ==========
    function showThankYouMessage(option) {
        const messages = {
            energy: "üëÇ Thank you! Energy crashes are our #1 priority.",
            menopause: "üçÉ Thank you! Perimenopause is a key module.",
            vulnerable: "ü•ó Thank you! 'Vulnerable Day' is core to our method.",
            mood: "üòå Thank you! Mood swings are at the heart of our empathetic AI.",
            other: "üí≠ Thank you for your personal story!"
        };
        
        const messageBox = document.createElement('div');
        messageBox.style.cssText = `
            text-align: center;
            margin: 15px 10px 0;
            padding: 12px;
            background: linear-gradient(135deg, ${option.color}15, ${option.color}05);
            border-radius: 8px;
            border-left: 3px solid ${option.color};
            color: #2d3748;
            font-weight: 500;
            font-size: 0.9rem;
            animation: fadeIn 0.5s;
        `;
        messageBox.textContent = messages[option.id] || 'Thank you for your vote!';
        container.appendChild(messageBox);
        
        setTimeout(() => {
            if (messageBox.parentNode) {
                messageBox.style.opacity = '0';
                messageBox.style.transition = 'opacity 0.5s';
                setTimeout(() => {
                    if (messageBox.parentNode) {
                        messageBox.parentNode.removeChild(messageBox);
                    }
                }, 500);
            }
        }, 5000);
    }
    
    function showNotification(text, type = 'info') {
        const colors = {
            info: '#4FD1C7',
            success: '#68D391',
            warning: '#F6AD55',
            error: '#FC8181'
        };
        
        const notification = document.createElement('div');
        notification.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px 20px;
            border-radius: 10px;
            border-left: 4px solid ${colors[type]};
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            z-index: 10002;
            animation: slideInRight 0.3s;
            max-width: 300px;
        `;
        notification.innerHTML = `
            <div style="display: flex; align-items: center; gap: 10px;">
                <div style="color: ${colors[type]}; font-size: 1.2rem;">‚úì</div>
                <div style="color: #2d3748; font-size: 0.9rem;">${text}</div>
            </div>
        `;
        
        document.body.appendChild(notification);
        
        setTimeout(() => {
            notification.style.opacity = '0';
            notification.style.transition = 'opacity 0.5s';
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 500);
        }, 3000);
    }
    
    // ========== EVENT LISTENERS ==========
    adminTrigger.addEventListener('click', function() {
        if (isAdminAuthenticated()) {
            showAdminDashboard();
        } else {
            showAdminLoginModal();
        }
    });
    
    adminTrigger.addEventListener('mouseenter', function() {
        this.style.opacity = '1';
    });
    
    adminTrigger.addEventListener('mouseleave', function() {
        this.style.opacity = '0.4';
    });
    
    // Keyboard shortcut: Ctrl+Shift+A for admin
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.shiftKey && e.key === 'A') {
            e.preventDefault();
            if (!document.getElementById('admin-login-modal') && !document.getElementById('admin-dashboard-modal')) {
                if (isAdminAuthenticated()) {
                    showAdminDashboard();
                } else {
                    showAdminLoginModal();
                }
            }
        }
    });
    
    // Auto-login from URL hash
    if (window.location.hash === '#admin') {
        setTimeout(() => {
            if (!isAdminAuthenticated() && !document.getElementById('admin-login-modal')) {
                showAdminLoginModal();
            }
        }, 1000);
    }
    
    // ========== INITIALIZE ==========
    renderPoll();
    
    // Add animation styles
    const style = document.createElement('style');
    style.textContent = `
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        .vote-option:hover div:first-child {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .vote-option:active div:first-child {
            transform: translateY(0);
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.15);
        }
        button:active {
            transform: translateY(0);
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            #aegisens-vote-widget {
                padding: 1.2rem 0.8rem !important;
                margin-top: 1.5rem !important;
                border-radius: 14px !important;
            }
            .vote-option div:first-child {
                padding: 14px 16px !important;
                font-size: 0.9rem !important;
            }
            #admin-dashboard-modal > div {
                max-height: 95vh !important;
                margin: 10px !important;
            }
        }
        @media (max-width: 480px) {
            #aegisens-vote-widget h3 {
                font-size: 1.3rem !important;
            }
            .vote-option div:first-child {
                padding: 12px 14px !important;
                font-size: 0.88rem !important;
            }
        }
    `;
    document.head.appendChild(style);
});
</script>
<!-- WAITLIST CARD WITH LIVE COUNTER -->
            <div class="waitlist-card" id="waitlist">
                <h3>‚ú® Join Our Private Beta</h3>
                <p>Limited spots available for empathetic health pioneers.</p>

                <!-- LIVE COUNTER -->
                <div class="counter-container">
                    <div class="counter-number" id="waitlist-counter">284</div>
                    <div class="counter-label">pioneers already joined</div>
                    <div class="counter-incentive">
                        <i class="fas fa-gift"></i> First 200 receive a <strong>free personalized insights report</strong>.
                    </div>
                </div>

                <!-- ===== AEGISENS PRIVATE WAITLIST v2.1 (FIXED) ===== -->
<div style="max-width: 480px; margin: 40px auto; padding: 40px; background: white; border-radius: 20px; box-shadow: 0 15px 50px rgba(224, 122, 154, 0.1); border: 2px solid #E07A9A;">
    <h3 style="color: #2d3748; text-align: center; margin-bottom: 10px; font-size: 1.8rem;">‚ú® Join Our Private Beta</h3>
    <p style="color: #4a5568; text-align: center; margin-bottom: 30px; font-size: 1.1rem;">Limited spots for health pioneers. Your data stays with us.</p>
    
    <!-- LIVE COUNTER -->
    <div style="background: linear-gradient(135deg, rgba(159, 122, 234, 0.05) 0%, rgba(224, 122, 154, 0.05) 100%); padding: 20px; border-radius: 15px; margin-bottom: 30px; text-align: center; border: 2px dashed #E07A9A;">
        <div style="font-size: 3rem; font-weight: 800; color: #E07A9A; line-height: 1;" id="aegisens-counter">284</div>
        <div style="color: #4a5568; font-weight: 600; margin: 10px 0;">pioneers already joined</div>
        <div style="color: #9F7AEA; font-size: 0.95rem;">
            <span style="color: #E07A9A;">üéÅ</span> First 200 get a <strong>free personalized report</strong>
        </div>
    </div>
    
    <!-- FORMULARZ -->
    <form id="aegisens-private-waitlist">
        <div style="margin-bottom: 20px;">
            <input type="email" id="waitlist-email" placeholder="your.email@example.com" required 
                   style="width: 100%; padding: 16px; border: 2px solid #e2e8f0; border-radius: 10px; font-size: 1rem; box-sizing: border-box; transition: all 0.3s;">
        </div>
        <div style="margin-bottom: 25px;">
            <input type="text" id="influencer-code" placeholder="Influencer code (optional)"
                   style="width: 100%; padding: 16px; border: 2px solid #e2e8f0; border-radius: 10px; font-size: 1rem; box-sizing: border-box;">
        </div>
        <input type="hidden" id="user-country">
        
        <button type="submit" id="submit-btn"
                style="width: 100%; padding: 18px; background: linear-gradient(90deg, #E07A9A, #9F7AEA); color: white; border: none; border-radius: 50px; font-weight: 700; font-size: 1.1rem; cursor: pointer; transition: all 0.3s;">
            Secure My Spot
        </button>
    </form>
    
    <!-- SUKCES -->
    <div id="success-msg" style="display: none; margin-top: 25px; padding: 20px; background: rgba(104, 211, 145, 0.1); border-radius: 10px; border-left: 4px solid #68D391; text-align: center;">
        <p style="color: #276749; font-weight: 600; margin: 0;">üéâ You're in! Check your email for confirmation.</p>
    </div>
    
    <!-- B≈ÅƒÑD -->
    <div id="error-msg" style="display: none; margin-top: 25px; padding: 20px; background: rgba(254, 178, 178, 0.1); border-radius: 10px; border-left: 4px solid #FC8181; text-align: center;">
        <p style="color: #9B2C2C; font-weight: 600; margin: 0;" id="error-text">Error</p>
    </div>
    
    <p style="text-align: center; color: #a0aec0; font-size: 0.9rem; margin-top: 30px;">
        üîí <strong>Your privacy first:</strong> We never share emails. No spam. GDPR compliant.
    </p>
</div>

<script>
// ===== KONFIGURACJA =====
const CONFIG = {
    // üîΩ TU WKLEJ SW√ìJ URL SKRYPTU (z /exec)
    SCRIPT_URL: 'https://script.google.com/macros/s/AKfycbzBgAB7i8j_np4FqWUzo2aeSSdG9SgdBL5WE-0QndO9A-pjhyKOKw97v2fDOdUjZ_Yq/exec'
};

// ===== INICJALIZACJA =====
document.addEventListener('DOMContentLoaded', function() {
    // 1. Wykryj kraj (bezpiecznie, z fallbackiem)
    fetch('https://ipapi.co/json/')
        .then(r => r.ok ? r.json() : Promise.reject())
        .then(data => {
            document.getElementById('user-country').value = data.country_code || 'XX';
        })
        .catch(() => {
            document.getElementById('user-country').value = 'XX';
})
        .finally(() => {
            console.log('Country detection completed');
        });
    
    // 2. Obs≈Çuga formularza
    const form = document.getElementById('aegisens-private-waitlist');
    const submitBtn = document.getElementById('submit-btn');
    const emailInput = document.getElementById('waitlist-email');
    
    form.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const email = emailInput.value.trim();
        const influencer = document.getElementById('influencer-code').value.trim();
        const country = document.getElementById('user-country').value;
        
        // ===== WALIDACJA =====
        if (!email) {
            showError('Please enter your email address.');
            emailInput.focus();
            return;
        }
        
        if (!email.includes('@') || !email.includes('.')) {
            showError('Please enter a valid email address.');
            emailInput.focus();
            return;
        }
        
        // ===== PRZYGOTUJ DANE (FIXED FORMAT) =====
        const params = new URLSearchParams();
        params.append('email', email);
        params.append('influencer', influencer);
        params.append('country', country);
        params.append('source', 'aegisens_website');
        
        // ===== WY≈öLIJ =====
        submitBtn.disabled = true;
        submitBtn.textContent = 'Sending...';
        submitBtn.style.opacity = '0.7';
        
        try {
            const response = await fetch(CONFIG.SCRIPT_URL, {
                method: 'POST',
                body: params,
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                }
            });
            
            const result = await response.json();
            console.log('Server response:', result);
            
            if (response.ok) {
                // SUKCES
                form.style.display = 'none';
                document.getElementById('success-msg').style.display = 'block';
                updateCounter();
                
                // Opcjonalnie: wyczy≈õƒá formularz
                emailInput.value = '';
                document.getElementById('influencer-code').value = '';
            } else {
                showError(result.message || 'Submission failed. Please try again.');
            }
        } catch (error) {
            console.error('Fetch error:', error);
            showError('Network error. Please check your connection.');
        } finally {
            // Przywr√≥ƒá przycisk
            submitBtn.disabled = false;
            submitBtn.textContent = 'Secure My Spot';
            submitBtn.style.opacity = '1';
        }
    });
});

// ===== FUNKCJE POMOCNICZE =====
function showError(message) {
    const errorDiv = document.getElementById('error-msg');
    document.getElementById('error-text').textContent = message;
    errorDiv.style.display = 'block';
    // Auto-hide po 5 sekundach
    setTimeout(() => {
        errorDiv.style.display = 'none';
    }, 5000);
}

function updateCounter() {
    const counter = document.getElementById('aegisens-counter');
    const current = parseInt(counter.textContent) || 284;
    counter.textContent = current + 1;
    // Animacja
    counter.style.transform = 'scale(1.2)';
    setTimeout(() => counter.style.transform = 'scale(1)', 300);
}

// ===== TEST API (opcjonalnie) =====
window.testWaitlistAPI = function(testEmail = 'test@example.com') {
    const params = new URLSearchParams();
    params.append('email', testEmail);
    params.append('country', 'TEST');
    params.append('source', 'console_test');
    
    fetch(CONFIG.SCRIPT_URL, {
        method: 'POST',
        body: params,
        headers: {'Content-Type': 'application/x-www-form-urlencoded'}
    })
    .then(r => r.json())
    .then(console.log)
    .catch(console.error);
};
</script>
</body>
</html>
